# 샘플 코드 학습

### 1. Minio 서버 실행 및 DRfC 커맨드 활성화
이 단계에서는 로컬 Minio 서버를 실행하고 필요한 환경을 설정 (처음에만)
```sh
source bin/activate.sh
cd bin
source activate.sh
```
<img src="https://github.com/user-attachments/assets/1d551d39-f5e5-4d53-910e-4214780b7f5b">
<img src="https://github.com/user-attachments/assets/41e8c09d-d41f-4e6d-953f-a0dc8af75438">

<br>
+ 
딥레이서 관련 모든 일(학습 시작, update, 버킷에 모델 올리기 등)을 하기 전에 "source bin/activate.sh" 매번 작성 <br>
또는 comman not found 같은 로그가 뜨거나 뭔가 잘 안된다 싶으면 일단 이 명령어를 작성해보세요 (그러면 대부분 됨) 

<br>

### 2. 학습을 위한 데이터 업로드
학습에 필요한 모든 파일을 Minio 서버에 업로드
```sh
dr-update
dr-update-env
dr-upload-custom-files
```
<img src="https://github.com/user-attachments/assets/e25d32c9-8517-4d7c-a422-ce466409d543">

<br>

### 3. 학습을 위해 관리자로 전환하기
만약 4. 학습 시작을 했는데 에러가 난다면, 사용자를 root(관리자)로 전환
```sh
su
```
저희는 에러가 나서 전환했고, 아래부터는 관리자 터미널 사진이 첨부됩니다.<br>
* 만약 비밀번호를 쳤는데 아래와 같은 로그가 뜬다면 비밀번호 변경하기 (비밀번호는 타이핑해도 안보임)
<img src="https://github.com/user-attachments/assets/bdf5b839-a4b5-4db6-8dbc-b163696472fd">
```sh
su passwd root
```
<img src="https://github.com/user-attachments/assets/ec73c4dc-c8c1-4f49-b3a4-7009bc678bcd">
<img src="https://github.com/user-attachments/assets/d99660e5-5afd-42f3-add3-4408ae9a6435">


### 4. 학습 시작
DeepRacer 모델의 학습을 시작
```sh
dr-start-training
```
이때 reward function 코드는 기본 코드이다 -> 성능이 안좋으므로 이 코드를 바꾸자!
<img width="1008" alt="스크린샷 2024-07-28 오전 12 48 06" src="https://github.com/user-attachments/assets/210dc04b-59c8-4b0b-9211-f2cc72c0aaf2">

<br>

### 4. 학습 진행 확인
학습 진행 상황을 실시간으로 확인할 수 있다. 
대신 학습 돌리는 터미널은 그대로 두고, 새로운 ubuntu 터미널을 열어 아래 명령어 실행하기
- 뷰어 보기 : 명령어 엔터 후 아래에 나오는 http 링크로 들어가면 뷰어 화면이 보임
```sh
dr-start-viewer
```
<img src="https://github.com/user-attachments/assets/99d2c05d-91d1-4922-94af-e52be5b0b2bb">
이 사진에서도 comman not found 로그가 떴길래 "source bin/activate.sh"를 해주니 잘 실행됨을 확인
<p align=center>
  <img width="330" alt="image" src="https://github.com/user-attachments/assets/f5281137-a993-431f-b038-6cdd1dea3d71">
</p>

<br>
- 뷰어 멈추기 : 꼭 아래 명령어를 통해 stop 하기
``` sh
dr-stop-viewer
```

<br>

### 5. 학습 종료
학습이 완료되면 (ctrl+C로 학습을 끝내면) 다음 명령어로 학습 종료
```sh
dr-stop-training
```
반드시 명령어를 사용하여 정상적으로 종료해야 한다.

### 6. 학습 종료 후, 모델은
deepracer-for-cloud/data/minio/bucket/rl-deepracer-sagemaker 디렉토리에 저장
